<!doctype html><html><head><title>KaraClock Complete - Prof. Dr. Barne Kleinen</title><link rel=icon href=https://bkleinen.github.io/favicon.ico>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=theme-color content="#1A94D2"><link rel=stylesheet href=https://bkleinen.github.io/css/styles.min.css media=screen></head><body><div class=container-fluid><header class="row m-b-5"><div class="col-md-2 c2">&nbsp;</div><div class="col-md-10 c1 p-2"><div class=container-flex><div class=row><div class=col-9><h1 class="c5 title">B1 Informatics 1 WS 2023/24</h1><small>Website of Prof. Dr. Barne Kleinen, Professor for Media Informatics
(<a href=https://imi-bachelor.htw-berlin.de>Bachelor</a>/<a href=https://imi-master.htw-berlin.de>Master</a>)
at <a href=https://www.htw-berlin.de>HTW Berlin</a></small></div><div class=col-3><a href=https://www.htw-berlin.de><img src=https://bkleinen.github.io/images/htw_logo_green.gif alt="HTW Berlin" title="HTW Berlin"></a><br><a href=https://bkleinen.github.io/>Programming and Web Technology @ IMI</a></div></div></div></div></header><main class="row p-0"><nav class="col-md-2 c2"><div class=nav><ul class="nav flex-md-column"><li class=nav-item></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/><div>Home<a href=https://home.htw-berlin.de/~kleinen/classes/ws2023/info1/labs/karaclock-complete/>
link to production</a></div></a></li><li class=nav-item><a class="nav-link dropdown-toggle active" data-bs-toggle=dropdown href=# role=button aria-expanded=false>Classes</a><div class=dropdown-menu><a class=dropdown-item href=https://bkleinen.github.io/classes/ws2023/info1/>B 1 Informatik 1</a>
<a class=dropdown-item href=https://bkleinen.github.io/classes/ws2023/m1-web/>M 1 Mediaprogramming</a>
<a class=dropdown-item href=https://bkleinen.github.io/classes/ws2023/m17-masterseminar/>M 17.1 Masterseminar</a>
<a class=dropdown-item href=https://bkleinen.github.io/classes/ws2023/>All WS 2023/24</a>
<a class=dropdown-item href=https://bkleinen.github.io/classes/>All Classes</a></div></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/material/><div>Material<a href=https://home.htw-berlin.de/~kleinen/classes/ws2023/info1/labs/karaclock-complete/>
link to production</a></div></a></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/software_projects/><div>Software Projects<a href=https://home.htw-berlin.de/~kleinen/classes/ws2023/info1/labs/karaclock-complete/>
link to production</a></div></a></li><li class=nav-item><a class="nav-link dropdown-toggle" data-bs-toggle=dropdown href=# role=button aria-expanded=false>Studies</a><div class=dropdown-menu><a class=dropdown-item href=https://bkleinen.github.io/studies/thesis/>Thesis</a>
<a class=dropdown-item href=https://bkleinen.github.io/studies/ic/>IC</a>
<a class=dropdown-item href=https://bkleinen.github.io/studies/grading/>Grading Info</a></div></li><li class=nav-item><a class="nav-link dropdown-toggle" data-bs-toggle=dropdown href=# role=button aria-expanded=false>Misc</a><div class=dropdown-menu><a class=dropdown-item href=https://bkleinen.github.io/misc/links/>Links to frequently used pages</a>
<a class=dropdown-item href=https://bkleinen.github.io/misc/trans/>Trans@HTW</a>
<a class=dropdown-item href=https://bkleinen.github.io/misc/lsf/>Email Collector for LSF</a></div></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/contact/><div>Contact Info<a href=https://home.htw-berlin.de/~kleinen/classes/ws2023/info1/labs/karaclock-complete/>
link to production</a></div></a></li><ul></div></nav><div class="col-md-10 c3"><div class=outer><nav aria-label=breadcrumb role=navigation><ol class="breadcrumb breadcrumb-thin"><li class=breadcrumb-item><a href=https://bkleinen.github.io/>Home</a></li><li class=breadcrumb-item><a href=https://bkleinen.github.io/classes/>classes</a></li><li class=breadcrumb-item><a href=https://bkleinen.github.io/classes/ws2023/>ws2023</a></li><li class=breadcrumb-item><a href=https://bkleinen.github.io/classes/ws2023/info1/>info1</a></li><li class=breadcrumb-item><a href=https://bkleinen.github.io/classes/ws2023/info1/labs/>labs</a></li><li class="breadcrumb-item active" aria-current=page>karaclock-complete</li></ol></nav></div><div class=coursenav><ul class="nav nav-tabs"><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/classes/ws2023/info1/>Info 1</a></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/classes/ws2023/info1/schedule/>Schedule</a></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/classes/ws2023/info1/resources/>Resources</a></li><li class=nav-item><a class="nav-link active" href=https://bkleinen.github.io/classes/ws2023/info1/labs/>Labs</a></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/classes/ws2023/info1/code/>Code</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" data-bs-toggle=dropdown href=# role=button aria-expanded=false>External Links</a><div class=dropdown-menu><a class=dropdown-item target=ex_link href="https://moodle.htw-berlin.de/course/view.php?id=44056">Moodle</a>
<a class=dropdown-item target=ex_link href="https://lsf.htw-berlin.de/qisserver/rds?state=verpublish&amp;status=init&amp;vmfile=no&amp;publishid=200295&amp;moduleCall=webInfo&amp;publishConfFile=webInfo&amp;publishSubDir=veranstaltung">SU in LSF</a>
<a class=dropdown-item target=ex_link href="https://lsf.htw-berlin.de/qisserver/rds?state=verpublish&amp;status=init&amp;vmfile=no&amp;publishid=200090&amp;moduleCall=webInfo&amp;publishConfFile=webInfo&amp;publishSubDir=veranstaltung">Labs in LSF</a>
<a class=dropdown-item target=ex_link href="https://lsf.htw-berlin.de/qisserver/rds?state=wplan&amp;act=stg&amp;pool=stg&amp;show=plan&amp;P.vx=mittel&amp;P.subc=plan&amp;subdir=stg&amp;week=-10&amp;k_abstgv.abstgvnr=231&amp;r_zuordabstgv.semvonint=1&amp;r_zuordabstgv.sembisint=1">Semesterstundenplan im LSF</a>
<a class=dropdown-item target=ex_link href=https://github.com/htw-imi-info1>Lecture Source Code</a></div></li></ul></div><div class=container-fluid><h2 class=followed>KaraClock Complete</h2><header class=following><a data-bs-toggle=collapse href=#tocContent role=button aria-expanded=false aria-controls=tocContent>Table of Contents
</a>&nbsp;&nbsp;&nbsp;&nbsp;
<a href=https://bkleinen.github.io/classes/ws2023/info1/labs/exercise-04/>&lt;prev</a></header><div class=collapse id=tocContent><nav id=TableOfContents><ul><li><ul><li><a href=#lab-02>Lab 02</a></li><li><a href=#lab-03>Lab 03</a></li><li><a href=#lab-04>Lab 04</a></li></ul></li></ul></nav></div><p>This is a complete overview of the KaraClock Exercises that lead to the implementation of the KaraClockDisplay-Example. The exercises are distributed through three Labs, as shown by the headlines here.</p><p>The material section contains an article about why I made this addition to the ClockDisplay example: <a href=https://bkleinen.github.io/material/info1/clock_display_refactoring/>ClockDisplay Example: Reflections and Improvements</a>.</p><p>Open the Greenfoot-Kara project <a href=https://github.com/htw-imi-info1/kara-clock-lab><code>https://github.com/htw-imi-info1/kara-clock-lab</code></a>.
It contains several test worlds. Make sure you&rsquo;ve instantiated the correct test world!</p><p>If you haven&rsquo;t already done so, you need to install <a href=https://www.greenfoot.org/download>Greenfoot</a> to open the scenarios. The main file is <code>project.greenfoot</code>.</p><h3 id=lab-02>Lab 02</h3><p><h4 id=0-count-leaves-with-act-loop-and-a-field>0. Count Leaves with act() loop and a field</h4><p>(optional if you skip to 2. Count Leaves but also a good preparation for it)</p><ol><li><p>Open <code>TestWorld4WithMyKara</code>. Make Kara move up to the tree and count the leaves found on it&rsquo;s way.
It should move up and count one step with each call to the act() method.
It should stop (by calling <code>Greenfoot.stop();</code>) either at the tree above or on the first free field.</p><p>Add an accessor(getter) (public int getCount() or similar) to return the number of leaves counted so far.</p></li></ol><h4 id=1-multi-move>1. Multi-Move</h4><ol><li>copy the multiMove method we discussed in class from <code>chapter02/kara/kara-loop-examples</code> to DigitDisplayKara (the method definition is already there, you just need to fill it). Test it in TestWorld0 and TestWorld1. TestWorld1 contains a setup you don&rsquo;t need to understand just now - just click &ldquo;act&rdquo; once and all Karas should be aligned in the middle like this:</li></ol><table><thead><tr><th style=text-align:left>Initial TestWorld1</th><th style=text-align:left>TestWorld1 after act()</th></tr></thead><tbody><tr><td style=text-align:left><img src=https://bkleinen.github.io/karaclock/01_multi_move/testworld1-before.jpg alt="TestWorld1 before"></td><td style=text-align:left><img src=https://bkleinen.github.io/karaclock/01_multi_move/testworld1-after.jpg alt="TestWorld1 after"></td></tr></tbody></table><ol start=2><li>Extend Multi-Move to move backwards: Extend the multiMove(int steps)-method to allow Kara to move backwards if a negative number is passed as parameter. It should turnAround (a method with the same name might be handy), move the appropriate number of steps and turnAround again. Hint: You can get the absolute value of a number <code>steps</code> using <code>Math.abs(steps)</code>. Use TestWorld0 during the development; after
you&rsquo;re done test it in TestWorld2:</li></ol><table><thead><tr><th style=text-align:left>Initial TestWorld2</th><th style=text-align:left>TestWorld2 after act()</th></tr></thead><tbody><tr><td style=text-align:left><img src=https://bkleinen.github.io/karaclock/01_multi_move/testworld2-before.jpg alt="TestWorld1 before"></td><td style=text-align:left><img src=https://bkleinen.github.io/karaclock/01_multi_move/testworld2-after.jpg alt="TestWorld1 after"></td></tr></tbody></table><h4 id=2-move-up-and-count>2. Move Up And Count</h4><ol><li>Open TestWorld4. complete the method <code>public int moveUpAndCount()</code> in <code>DigitDisplayKara</code>.
It should move up and count the leaves. It should stop either at the tree above or on the first free field. It returns the number of leaves counted.
Test your method by calling it from Kara&rsquo;s context menu.</li><li>When you&rsquo;re done, test your method in <code>TestWorld5</code>, which contains some edge cases like a full row and one with zero leaves.</li></ol><table><thead><tr><th style=text-align:left>TestWorld5 before</th><th style=text-align:left>TestWorld5 output</th><th style=text-align:left>TestWorld5 after act()</th></tr></thead><tbody><tr><td style=text-align:left><img src=https://bkleinen.github.io/karaclock/02_move_up_and_count/testworld5-before.jpg alt="TestWorld5 before"></td><td style=text-align:left><img src=https://bkleinen.github.io/karaclock/02_move_up_and_count/testworld5-output.jpg alt="TestWorld5 output"></td><td style=text-align:left><img src=https://bkleinen.github.io/karaclock/02_move_up_and_count/testworld5-after.jpg alt="TestWorld5 after"></td></tr></tbody></table></p><h3 id=lab-03>Lab 03</h3><p><h4 id=3-count-leaves-and-go-back>3. Count Leaves (and go back)</h4><ol><li><p>Open TestWorld4 again. Complete the method <code>public int count()</code> in <code>DigitDisplayKara</code>.
It should combine the <code>public int moveUpAndCount()</code> and <code>public int multiMove()</code> methods (that is, use them both by calling them) to walk up, count the leaves, return to the original position and return the number of leaves counted.</p></li><li><p>When you&rsquo;re done, test your method in <code>TestWorld6Count</code>, which contains some edge cases like a full row and one with zero leaves.</p></li></ol><table><thead><tr><th style=text-align:left>before</th><th style=text-align:left>output</th><th style=text-align:left>after act()</th></tr></thead><tbody><tr><td style=text-align:left><img src=https://bkleinen.github.io/karaclock/03_count_leaves/testWorld6Before.jpg alt="TestWorld5 before"></td><td style=text-align:left>same as with TestWorld5: <img src=https://bkleinen.github.io/karaclock/03_count_leaves/testWorld6Output.jpg alt="TestWorld5 output"></td><td style=text-align:left>exactly the same as before calling act!</td></tr></tbody></table><h4 id=4-increment-leaves>4. Increment Leaves</h4><ol><li><p>Open TestWorld4 again. Complete the method <code>public int increment()</code> in <code>DigitDisplayKara</code>.
It should call <code>public int moveUpAndCount()</code> and then either
a. add one more leaf, return to the original position using <code>public int multiMove()</code> and return the new leaf count (including the leaf just added)
b. if the tree is reached (no more space, overflow!) return to the original position and collect all leaves on its way (hint: this is exactly like multiMove with one addition!) and return a 0 as the new leaf count.</p></li><li><p>When you&rsquo;re done, test your method in <code>TestWorld7Increment</code>, which contains some edge cases like a full row and one with zero leaves.</p></li></ol><table><thead><tr><th style=text-align:left>before</th><th style=text-align:left>output</th><th style=text-align:left>after act()</th></tr></thead><tbody><tr><td style=text-align:left><img src=https://bkleinen.github.io/karaclock/04_increment/world7_before.jpg alt="TestWorld7 before"></td><td style=text-align:left><img src=https://bkleinen.github.io/karaclock/04_increment/world7-output.jpg alt="TestWorld7 output"></td><td style=text-align:left><img src=https://bkleinen.github.io/karaclock/04_increment/world7_after.jpg alt="TestWorld7 after"></td></tr></tbody></table><h4 id=5-decimal-number>5. Decimal Number</h4><p>Now, with a DigitDisplayKara that can count and increment its leaves, you can use it to build a number -
where DigitDisplayKara has a placeValue (e.g. 1,10,100,1000 etc for Decimal Numbers).</p><ol><li><p>Open the World <code>DecimalNumberWorld</code> - with the implemented methods, it should work! Experiment with calling act() and run().</p></li><li><p>For the Curious: (optional) Duplicate <code>DecimalNumberWorld</code> to create a number with a different base - e.g. <code>BinaryNumberWorld</code> for base 2.
Change the BASE constant to 2 and try it out by calling act() and run().</p></li></ol><p><img src=https://bkleinen.github.io/karaclock/05_decimal_number/decimal_number.jpg alt=DecimalNumberWorld></p></p><h3 id=lab-04>Lab 04</h3><p><h4 id=6-initialize-digitdisplaykara-set-count-of-leaves>6. Initialize DigitDisplayKara (set count of leaves)</h4><p>In order to be able to set the clock to a given time, each digit needs to be able to initialize with a given number of leaves.</p><p>This could be achieved with the same number of ticks, but would take some time and would not be as elegant.</p><p>You can use the DecimalNumberWorld to test it. After completed, call DisplayKara&rsquo;s <code>setValue(1234567890);</code> to achieve the pattern in part 5.</p><h4 id=7-the-first-kara-clock>7. The first Kara Clock</h4><p>Now, with your completed DigitalDisplayKara, the first Kara Clock can be built.</p><p>Open <code>ClockDisplayWorld1</code> - it contains three DigitDisplayKaras: one for minutes, one for ten minutes, and one for hours.
Experiment a bit with it!</p><p>Showing 24 hours is difficult though - 24 leaves would be too much, using two digits - one for 10 hours, one for single hours - would need to toggle the
limit for the single hour DigitDisplayKara between 10 and 4.</p><p>If you want a <em>real</em> clock open <code>ClockDisplayWorld12Hours</code>. It starts a thread and calls tick() every second, you can start and stop it using the
respective methods in <code>ClockDisplayKara</code></p><h4 id=8-the-12-hour-clock-with-ampm>8. The 12 Hour Clock with am/pm</h4><p>To show all 24 hours, a 12 hours am/pm is a good solution for the Kara-Clock!</p><p>The first step of changing it to a proper 12h clock with am/pm display has
already been made in <code>ClockDisplayWorld12Hours</code>. It uses a special <code>HoursDisplayKara</code>
for the hours, which shows a &ldquo;12&rdquo; instead of the &ldquo;0&rdquo;. Find the <code>getDisplayText(int count)</code>
to see how this is implemented. You can use this as a guide to create
an AmPmDisplayKara that is also a subclass of DigitDisplayKara and only overrides the <code>public String getDisplayText(int count)</code>
(note that this is only used to set the text below the lower tree line.)</p><p>Use <code>ClockDisplayWorldAmPm</code> (which is a copy of <code>ClockDisplayWorld12Hours</code>) to implement this.
Find and read its <code>prepareColumns()</code> method to understand how the clock display is built and what you need
to do to add another digit.</p><p>Technically, the ClockDisplayWorld is just a number with different rollOverLimits for each digit.
The place value has to be the product of the previous (mostly right) digit and its place value:</p><table><thead><tr><th style=text-align:left></th><th style=text-align:left>am/pm</th><th style=text-align:left>hours</th><th style=text-align:left>ten minutes</th><th style=text-align:left>minutes</th></tr></thead><tbody><tr><td style=text-align:left>limit</td><td style=text-align:left>2</td><td style=text-align:left>12</td><td style=text-align:left>6</td><td style=text-align:left>10</td></tr><tr><td style=text-align:left>placeValue</td><td style=text-align:left>12*60</td><td style=text-align:left>6*10</td><td style=text-align:left>10*1</td><td style=text-align:left>1</td></tr></tbody></table><p>Your task is to add the am/pm display.</p><p>It is just another digit with a place value of 12 hours,
and should show am/pm instead of 0 and 1.
Also, it has a special (quite illogical) position at the end, eg. 12:00 am.</p><p>To enable the DisplayKara to find and walk to the next DigitDisplayKara, each digit stores the number of steps (which may be
negative as it is simply passed to multiMove() ) in its field <code>stepsToNextDigit</code> which can be set with the constructor:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=nf>DigitDisplayKara</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>rollOverLimit</span><span class=p>,</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>placeValue</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>stepsToNextDigit</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><p><img src=https://bkleinen.github.io/karaclock/08_add_am_pm/karaclock.jpg alt=KaraClock></p></p></div></div></div></main><footer class="row p-0"><div class="col-md-2 c2">&nbsp;</div><div class="col-md-10 c4"><small><hr><div class=container-fluid><div class=row><div class=col-9><a href=https://bkleinen.github.io/contact>Prof. Dr. Barne Kleinen</a>,
<a href=https://www.htw-berlin.de>HTW Berlin</a>,
<a href=https://www.f4.htw-berlin.de/>FB4</a>, <a href=https://imi-bachelor.htw-berlin.de/>International Media and Computing</a>.
&nbsp;&nbsp;&dash;&nbsp;&nbsp;</div><div class=col-3><a href=https://bkleinen.github.io/contact/impressum>Impressum</a>,
<a href=https://bkleinen.github.io/contact/datenschutzerklaerung>Datenschutzerkl√§rung</a></div></div><div class=row><div class=col-9>This work is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/>Creative Commons Attribution-NonCommercial 4.0 International License</a>.<br><small>This page was authored by: kleinen</small></div><div class=col-3><a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/><img alt="Creative Commons Licence" style=border-width:0 src=https://i.creativecommons.org/l/by-nc/4.0/88x31.png></a></div></div><div class=row><div class=col-sm-12></div></div></div></small></div></footer><script>let sortTables=!1,stripedTables=!0</script><script src=https://bkleinen.github.io/js/bundle.min.a69b27a48bd90e096b841772016dd704ae8e8d7882bffd22329ca8a626df8e40.js defer></script></body></html>