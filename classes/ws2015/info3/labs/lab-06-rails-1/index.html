<!doctype html><html>
<head>
<title>Assignment 06 - Rails - First Steps - Prof. Dr. Barne Kleinen</title>
<link rel=icon href=https://bkleinen.github.io/favicon.ico>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<link rel=stylesheet href=https://bkleinen.github.io/assets/main.css>
<link rel=stylesheet href=https://bkleinen.github.io/css/syntax.css>
<meta name=theme-color content="#1A94D2">
<link rel=stylesheet href=https://bkleinen.github.io/css/styles.min.css media=screen>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-121207290-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-121207290-1')</script>
<style>.async-hide{opacity:0!important}</style>
<script>(function(c,b,d,e,f,a,g,h,i){b.className+=' '+d,a.start=1*new Date,a.end=g=function(){b.className=b.className.replace(RegExp(' ?'+d),'')},(c[e]=c[e]||[]).hide=a,setTimeout(function(){g(),a.end=null},f),a.timeout=f})(window,document.documentElement,'async-hide','dataLayer',4e3,{'GTM-5NV39VZ':!0})</script>
<script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-121207290-2','auto'),ga('require','GTM-5NV39VZ'),ga('send','pageview')</script>
</head>
<body>
<div class=container-fluid>
<header class="row m-b-5">
<div class="col-md-2 c2">
&nbsp;
</div>
<div class="col-md-10 c1 p-2"><div class=container-flex>
<div class=row>
<div class=col-9>
<h1 class="c5 title"> Info3 - Labs and Exercises </h1>
<small>Website of <a href=https://bkleinen.github.io/>Prof. Dr. Barne Kleinen</a>, Professor for Media Informatics
(<a href=https://imi-bachelor.htw-berlin.de>Bachelor</a>/<a href=https://imi-master.htw-berlin.de>Master</a>)
at <a href=https://www.htw-berlin.de>HTW Berlin</a>
</small>
</div>
<div class=col-3>
<a href=https://www.htw-berlin.de><img src=https://bkleinen.github.io/images/htw_logo_green.gif alt="HTW Berlin" title="HTW Berlin"></a><br><a href=https://bkleinen.github.io/>Prof. Dr. Barne Kleinen<br>HTW Berlin</a>
</div>
</div>
</div>
</div>
</header>
<main class="row p-0"><nav class="col-md-2 c2">
<div class=nav>
<ul class="nav flex-md-column">
<li class=nav-item>
<a class=nav-link href=https://bkleinen.github.io/>Home</a>
</li>
<li class=nav-item>
<a class="nav-link dropdown-toggle active" data-bs-toggle=dropdown href=# role=button aria-expanded=false>Classes</a>
<div class=dropdown-menu>
<a class=dropdown-item href=https://bkleinen.github.io/classes/ws2021/info2/>B7 Info 2</a>
<a class=dropdown-item href=https://bkleinen.github.io/classes/ws2021/networks/>B9 Networks</a>
<a class=dropdown-item href=https://bkleinen.github.io/classes/ws2021/m1-web/>M1 Labs</a>
<a class=dropdown-item href=https://bkleinen.github.io/classes/ws2021/m-wt1-webapplications/>M WT1 WebApps</a>
<a class=dropdown-item href=https://bkleinen.github.io/classes/ws2021/>All WS 21/22</a>
<a class=dropdown-item href=https://bkleinen.github.io/classes/>All Classes</a>
</div>
</li>
<li class=nav-item>
<a class=nav-link href=https://bkleinen.github.io/material/>Material</a>
</li>
<li class=nav-item>
<a class=nav-link href=https://bkleinen.github.io/software_projects/>Software Projects</a>
</li>
<li class=nav-item>
<a class="nav-link dropdown-toggle" data-bs-toggle=dropdown href=# role=button aria-expanded=false>Studies</a>
<div class=dropdown-menu>
<a class=dropdown-item href=https://bkleinen.github.io/studies/thesis/>Thesis</a>
<a class=dropdown-item href=https://bkleinen.github.io/studies/ic/>IC</a>
<a class=dropdown-item href=https://bkleinen.github.io/studies/grading/>Grading Info</a>
</div>
</li>
<li class=nav-item>
<a class="nav-link dropdown-toggle" data-bs-toggle=dropdown href=# role=button aria-expanded=false>Misc</a>
<div class=dropdown-menu>
<a class=dropdown-item href=https://bkleinen.github.io/misc/links/>Links to frequently used pages</a>
<a class=dropdown-item href=https://bkleinen.github.io/misc/trans/>Trans@HTW</a>
<a class=dropdown-item href=https://bkleinen.github.io/misc/lsf/>Email Collector for LSF</a>
</div>
</li>
<li class=nav-item>
<a class=nav-link href=https://bkleinen.github.io/contact/>Contact Info</a>
</li>
<ul>
</div>
</nav>
<div class="col-md-10 c3">
<div class=outer>
<nav aria-label=breadcrumb role=navigation>
<ol class="breadcrumb breadcrumb-thin">
<li class=breadcrumb-item><a href=https://bkleinen.github.io/>Home</a></li>
<li class=breadcrumb-item><a href=https://bkleinen.github.io/classes/>classes</a></li>
<li class=breadcrumb-item><a href=https://bkleinen.github.io/classes/ws2015/>ws2015</a></li>
<li class=breadcrumb-item><a href=https://bkleinen.github.io/classes/ws2015/info3/>info3</a></li>
<li class=breadcrumb-item><a href=https://bkleinen.github.io/classes/ws2015/info3/labs/>labs</a></li>
<li class="breadcrumb-item active" aria-current=page>lab-06-rails-1</li>
</ol>
</nav>
</div>
<div class=coursenav>
<ul class="nav nav-tabs">
<li class=nav-item>
<a class=nav-link href=https://bkleinen.github.io/classes/ws2015/info3/>Info3:</a>
</li>
<li class=nav-item>
<a class=nav-link href=https://bkleinen.github.io/classes/ws2015/info3/schedule/>Schedule</a>
</li>
<li class=nav-item>
<a class="nav-link active" href=https://bkleinen.github.io/classes/ws2015/info3/labs/>Labs</a>
</li>
<li class=nav-item>
<a class=nav-link href=https://bkleinen.github.io/classes/ws2015/info3/code/>Code Examples</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" data-bs-toggle=dropdown href=# role=button aria-expanded=false>External Links</a>
<div class=dropdown-menu>
<a class=dropdown-item target=ex_link href="https://moodle.htw-berlin.de/course/view.php?id=7348">Moodle</a>
<a class=dropdown-item target=ex_link href=https://github.com/htw-imi-info3>Github</a>
<a class=dropdown-item target=ex_link href="https://lsf.htw-berlin.de/qisserver/rds?state=wsearchv&search=2&veranstaltung.veranstid=107762">LSF</a>
<a class=dropdown-item target=ex_link href="https://lsf.htw-berlin.de/qisserver/rds?state=wplan&act=stg&pool=stg&show=plan&P.vx=kurz&r_zuordabstgv.semvonint=3&r_zuordabstgv.sembisint=3&missing=allTerms&k_abstgv.abstgvnr=231">Term Schedule</a>
</div>
</li>
</ul>
</div>
<div class=container-fluid>
<h2 class=followed> Assignment 06 - Rails - First Steps</h2>
<header class=following>
<a data-toggle=collapse href=#tocContent role=button aria-expanded=false aria-controls=tocContent>
Table of Contents
</a>
&nbsp;&nbsp;&nbsp;&nbsp;
<a href=/classes/ws2015/info3/labs/lab-05-legacy/>&lt;prev</a>
<a href=/classes/ws2015/info3/labs/lab-07-rails-2/>next></a>
</header>
<div class=collapse id=tocContent>
<nav id=TableOfContents>
<ul>
<li><a href=#part-0-show-the-customer-with-its-name>Part 0: Show the Customer with it&rsquo;s Name</a></li>
<li><a href=#part-1-creating-testdata>Part 1: Creating Testdata</a>
<ul>
<li><a href=#your-task-is-to-add-two-pumpkins-each-to-the-factories>Your task is to add two pumpkins each to the factories:</a></li>
</ul>
</li>
<li><a href=#part-2-show-all-orders-for-a-customer>Part 2: Show all orders for a customer</a></li>
<li><a href=#part-3-add-a-price-to-the-order-and-sum-them-up>Part 3: Add a price to the order and sum them up.</a></li>
</ul>
</nav>
</div>
<p><img src=../images/pumpkins-wide.jpg alt=Pumpkins title=pumpkins>
Foto by <a href=https://www.flickr.com/photos/pedroferrer/3615212504>Pedro J. Ferreira</a></p>
<h1 id=prelab>Prelab</h1>
<ol>
<li>Read through two Rails Guides:
<ol>
<li><a href=https://guides.rubyonrails.org/active_record_basics.html>https://guides.rubyonrails.org/active_record_basics.html</a></li>
<li><a href=https://guides.rubyonrails.org/association_basics.html>https://guides.rubyonrails.org/association_basics.html</a></li>
</ol>
</li>
</ol>
<h1 id=assignment>Assignment</h1>
<h2 id=part-0-show-the-customer-with-its-name>Part 0: Show the Customer with it&rsquo;s Name</h2>
<p>On the orders#show page, show the associated customer with its name rather than the ID -
Test driven! You can use the :order1 factory for
this, see Part 1 for more info on FactoryGirl test
data.</p>
<h2 id=part-1-creating-testdata>Part 1: Creating Testdata</h2>
<p>You should never be attached to manually created test data living in your development or test database. Instead, you should have scripts that generate and re-generate this test data on demand.</p>
<p>I&rsquo;ve prepared such a script for you using <a href=https://rubygems.org/gems/factory_girl>FactoryGirl</a> and a <a href=https://github.com/htw-imi-info3/lab-06-railsapp-HTW/blob/master/lib/tasks/db.rake>rake task</a>.</p>
<p>You can use the task with</p>
<pre><code>rake db:populate
</code></pre>
<p>which automatically creates all models defined in spec/factories to populate your development database. The database will be reseted beforehand - remember, you should not be attached to any data in your development database. You&rsquo;ll find examples on how FactoryGirls is used in the provided feature specs. (Remember, tests use a different database!)</p>
<h3 id=your-task-is-to-add-two-pumpkins-each-to-the-factories>Your task is to add two pumpkins each to the factories:</h3>
<ol>
<li>Fork the Repository: <a href=https://github.com/htw-imi-info3/lab-06-railsapp-HTW>https://github.com/htw-imi-info3/lab-06-railsapp-HTW</a></li>
</ol>
<ul>
<li>it is ok to publish your solution there.</li>
</ul>
<ol start=2>
<li>decide on the pumpkins you want to add (<a href=https://www.allaboutpumpkins.com/perfect.html>https://www.allaboutpumpkins.com/perfect.html</a> might be an inspiration) and add an issue to the original repository. e.g. open a new issue with the topic &ldquo;add Blue Hubbard to Test Data&rdquo;
so that everyone else knows you&rsquo;re working on that particular pumpkin and we don&rsquo;t have 50 blue hubbards in the end.</li>
<li>create a branch in your fork - this will be necessary for the pull request. Everything in that branch will be added to the pull request! Make sure to do everything else in your master branch. You can merge or rebase the pumpkins branch into your master to have your testdata availabe.</li>
<li>add the pumpkin factories by adding <strong>a new file</strong> to spec/factories/</li>
</ol>
<ul>
<li>remember you should have two pumpkin types each! - if you run into trouble or are just curious about FactoryGirl, you&rsquo;ll find info here: <a href=https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md>https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md</a></li>
</ul>
<ol start=5>
<li>
<p>if you&rsquo;re done and the specs are running (run</p>
<pre><code> rspec spec
</code></pre>
</li>
</ol>
<p>or just</p>
<pre><code>    rake

to find that out) send me a pull request.
</code></pre>
<p>As others will be doing the same, you might want to pull in the pumpkins of the others. <a href=https://help.github.com/articles/syncing-a-fork>https://help.github.com/articles/syncing-a-fork</a> will help with that.</p>
<h2 id=part-2-show-all-orders-for-a-customer>Part 2: Show all orders for a customer</h2>
<p>Add a list of all Orders placed by the customer on the page that shows a single customer. Develop this feature test-driven by first creating a new feature test in spec/features. The two provided feature tests should give you plenty of hints, see <a href=https://github.com/htw-imi-info3/lab-06-railsapp-HTW/tree/master/spec/features>https://github.com/htw-imi-info3/lab-06-railsapp-HTW/tree/master/spec/features</a> - for further documentation see</p>
<ul>
<li><a href=https://rubydoc.info/github/jnicklas/capybara/master>Capybara Doc</a> on how to navigate web pages automatically with capybara and</li>
<li><a href=https://www.relishapp.com/rspec/rspec-expectations/docs/built-in-matchers>RSpec Matchers</a> if you need more specific assertions (expectations)</li>
</ul>
<p>After you&rsquo;ve created a failing test case, you can proceed to implement the feature.</p>
<p>Note that there is a factory for a user with several orders, you can use that for testing:</p>
<pre><code>Customer.where(name: &quot;Dagobert&quot;).first.orders
</code></pre>
<h2 id=part-3-add-a-price-to-the-order-and-sum-them-up>Part 3: Add a price to the order and sum them up.</h2>
<p>Now, add a new field &ldquo;price&rdquo; to the Order model by creating a new migration,
and show the total of all Orders on the customer page. Testdriven, of course.</p>
<p>See the rails guides on migrations for examples of migrations.</p>
<h1 id=report---what-to-hand-in>Report - what to hand in</h1>
<p><strong>I need the pull request before 23:00 the night before your next lab.</strong>
(just for the new pumpkins, Parts 2&3 will only be in your fork! Remember that you have to
have the pull request in a separate branch for that, otherwise everything that you&rsquo;ll
commit will be added to the pull request!)</p>
<p>In your PDF report, describe what worked and what didn&rsquo;t work, problems you ran into, etc.
Give a link to your fork and your pull request, as well as the name of the pumpkin file
you&rsquo;ve provided.</p>
</div>
</div>
</div>
</main>
<footer class="row p-0">
<div class="col-md-2 c2">
&nbsp;
</div>
<div class="col-md-10 c4">
<small>
<hr>
<div class=container-fluid>
<div class=row>
<div class=col-9>
<a href=https://bkleinen.github.io/contact>Prof. Dr. Barne Kleinen</a>,
<a href=https://www.htw-berlin.de>HTW Berlin</a>,
<a href=https://www.f4.htw-berlin.de/>FB4</a>, <a href=https://imi-bachelor.htw-berlin.de/>International Media and Computing</a>.
&nbsp;&nbsp;&dash;&nbsp;&nbsp;
</div>
<div class=col-3>
<a href=https://bkleinen.github.io/contact/impressum>Impressum</a>,
<a href=https://bkleinen.github.io/contact/datenschutzerklaerung>Datenschutzerkl√§rung</a>
</div>
</div>
<div class=row>
<div class=col-9>
This work is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/>Creative Commons Attribution-NonCommercial 4.0 International License</a>.
<br><small>
This page was authored by: kleinen
</small>
</div>
<div class=col-3>
<a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/><img alt="Creative Commons Licence" style=border-width:0 src=https://i.creativecommons.org/l/by-nc/4.0/88x31.png></a>
</div>
</div>
<div class=row>
<div class=col-sm-12>
</div>
</div>
</div>
</small>
</div>
&lt;
</footer>
<script>var tables=document.getElementsByTagName("table");for(i=0;i<tables.length;i++)tables[i].classList.add("table"),tables[i].classList.add("table-sm"),tables[i].classList.add("table-striped")</script>
<script src=https://bkleinen.github.io/js/bundle.min.js defer></script>
</body>
</html>