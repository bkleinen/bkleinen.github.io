<!doctype html><html><head><title>Lab 04 - Legacy Code - Refactoring to Patterns - Prof. Dr. Barne Kleinen</title><link rel=icon href=https://bkleinen.github.io//favicon.ico>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=theme-color content="#1A94D2"><link rel=stylesheet href=https://bkleinen.github.io/css/styles.min.css media=screen></head><body><div class=container-fluid><header class="row m-b-5"><div class="col-md-2 c2">&nbsp;</div><div class="col-md-10 c1 p-2"><div class=container-flex><div class=row><div class=col-9><h1 class="c5 title">B15 Informatik 3 (Info3)</h1><small>Website of Prof. Dr. Barne Kleinen, Professor for Media Informatics
(<a href=https://imi-bachelor.htw-berlin.de>Bachelor</a>/<a href=https://imi-master.htw-berlin.de>Master</a>)
at <a href=https://www.htw-berlin.de>HTW Berlin</a></small></div><div class=col-3><a href=https://www.htw-berlin.de><img src=https://bkleinen.github.io//images/htw_logo_green.gif alt="HTW Berlin" title="HTW Berlin"></a><br><a href=https://bkleinen.github.io//>Programming and Web Technology @ IMI</a></div></div></div></div></header><main class="row p-0"><nav class="col-md-2 c2"><div class=nav><ul class="nav flex-md-column"><li class=nav-item></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/><div>Home</div></a></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/classes/ws2024/><div>Classes</div></a></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/material/><div>Material</div></a></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/software_projects/><div>Software Projects</div></a></li><li class=nav-item><a class="nav-link dropdown-toggle" data-bs-toggle=dropdown href=# role=button aria-expanded=false>Studies</a><div class=dropdown-menu><a class=dropdown-item href=https://bkleinen.github.io/studies/thesis/>Thesis</a>
<a class=dropdown-item href=https://bkleinen.github.io/studies/ic/>IC</a>
<a class=dropdown-item href=https://bkleinen.github.io/studies/bafoeg/>Bafoeg</a>
<a class=dropdown-item href=https://bkleinen.github.io/studies/grading/>Grading Info</a></div></li><li class=nav-item><a class="nav-link dropdown-toggle" data-bs-toggle=dropdown href=# role=button aria-expanded=false>Misc</a><div class=dropdown-menu><a class=dropdown-item href=https://bkleinen.github.io/misc/links/>Links to frequently used pages</a>
<a class=dropdown-item href=https://bkleinen.github.io/misc/trans/>Trans@HTW</a>
<a class=dropdown-item href=https://bkleinen.github.io/misc/lsf/>Email Collector for LSF</a></div></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/contact/><div>Contact Info</div></a></li><ul></div></nav><div class="col-md-10 c3"><div class=outer><nav aria-label=breadcrumb role=navigation><ol class="breadcrumb breadcrumb-thin"><li class=breadcrumb-item><a href=https://bkleinen.github.io/>Home</a></li><li class=breadcrumb-item><a href=https://bkleinen.github.io/classes/>classes</a></li><li class=breadcrumb-item><a href=https://bkleinen.github.io/classes/ss2014/>ss2014</a></li><li class=breadcrumb-item><a href=https://bkleinen.github.io/classes/ss2014/info3/>info3</a></li><li class=breadcrumb-item><a href=https://bkleinen.github.io/classes/ss2014/info3/labs/>labs</a></li><li class="breadcrumb-item active" aria-current=page>lab-04</li></ol></nav></div><div class=coursenav><ul class="nav nav-tabs"><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/classes/ss2014/info3/>B15 Informatik 3 (Info3)</a></li></ul></div><div class=container-fluid><h2 class=followed>Lab 04 - Legacy Code - Refactoring to Patterns</h2><header class=following><a data-bs-toggle=collapse href=#tocContent role=button aria-expanded=false aria-controls=tocContent>Table of Contents
</a>&nbsp;&nbsp;&nbsp;&nbsp;
<a href=https://bkleinen.github.io/classes/ss2014/info3/labs/lab-07/>&lt;prev</a></header><div class=collapse id=tocContent><nav id=TableOfContents><ul><li><a href=#assignment-gilded-rose-kata>Assignment: Gilded Rose Kata</a><ul><li><a href=#write-characterization-tests>Write Characterization Tests</a></li><li><a href=#install-and-run-tests>Install and Run Tests</a></li><li><a href=#write-characterization-tests-1>Write Characterization Tests</a></li><li><a href=#refactor>Refactor.</a></li><li><a href=#add-the-new-functionality>Add the new functionality.</a></li></ul></li></ul></nav></div><p><img src=../../images/The_Gilded_Rose.jpg alt="The Gilded Rose">
The Gilded Rose, Trade District, <a href=https://wowwiki-archive.fandom.com/wiki/Gilded_Rose>World of Warcraft.</a></p><h2 id=assignment-gilded-rose-kata>Assignment: Gilded Rose Kata</h2><p>Source Code: There are three versions. Choose one. Have brief look at the
readme and the GuildedRose class.</p><ul><li>Ruby Version: <a href=https://github.com/htw-imi-info3-archive/gilded-rose-kata>https://github.com/htw-imi-info3-archive/gilded-rose-kata</a></li><li>Java/Eclipse Version with Test Stub: <a href=https://github.com/htw-imi-info3-archive/lab-05-JavaMavenGildedRoseJavaEclipse>https://github.com/htw-imi-info3-archive/lab-05-JavaMavenGildedRoseJavaEclipse</a></li><li>Original Version using Maven: <a href=https://github.com/htw-imi-info3-archive/lab-05-JavaMavenGildedRose>https://github.com/htw-imi-info3-archive/lab-05-JavaMavenGildedRose</a></li></ul><h3 id=write-characterization-tests>Write Characterization Tests</h3><p>To be able to add the new functionality as requested you should write
Characterization tests first.
You will not yet refactor or add the required new functionality!</p><h3 id=install-and-run-tests>Install and Run Tests</h3><p>First, you need to install the Software and run the tests.
Download and Install the source code for this exercise. Upon request, you can do this exercise either in Ruby or in Java. (Or both).
In any case, you should have a look at the provided tests in both versions:</p><ul><li>the Ruby spec uses as Test DSL by Jim Weirich called <a href=https://github.com/jimweirich/rspec-given>rspec-given</a></li><li>the Java Version uses <a href=https://junit.sourceforge.net/javadoc_40/org/junit/runners/Parameterized.html>Parameterized Tests</a> that makes the individual test cases very compact.</li></ul><p>In both cases, you&rsquo;ll need to use a code coverage tool to make sure you have all
branches covered with your tests.</p><h4 id=ruby-version>Ruby Version</h4><ul><li>see instructions in the repo readme: <a href=https://github.com/htw-imi-info3-archive/gilded-rose-kata>https://github.com/htw-imi-info3-archive/gilded-rose-kata</a></li></ul><p>Bundler will install simplecov. After running rspec, you&rsquo;ll find the html coverage report in</p><pre><code>coverage/
</code></pre><h4 id=java-version>Java Version</h4><p>I did the java version using Eclipse and <a href=https://eclemma.org/>ECLEmma</a>
as a code coverage tool. In Eclipse, use Help->Install new software with to install
it. Copy this update site url into the box:</p><pre><code>https://update.eclemma.org/
</code></pre><p>If you prefer to use another ide & code coverage tool, you can of course do so.</p><p>Get the repository from</p><ul><li><a href=https://github.com/htw-imi-info3-archive/lab-05-JavaMavenGildedRoseJavaEclipse>https://github.com/htw-imi-info3-archive/lab-05-JavaMavenGildedRoseJavaEclipse</a></li></ul><p>and import it (Import->General->Existing Projects into Workspace) to Eclipse.</p><p>I&rsquo;ve already added a JUnit test stub to get you started quickly. We&rsquo;ll have a
look at it in the lab.</p><p>If you want to use Maven, you might want to use the original version:</p><ul><li><a href=https://github.com/htw-imi-info3-archive/lab-05-JavaMavenGildedRose>https://github.com/htw-imi-info3-archive/lab-05-JavaMavenGildedRose</a></li></ul><h3 id=write-characterization-tests-1>Write Characterization Tests</h3><p>In both the Ruby & Java Version I&rsquo;ve already provided a stub for the tests.
All you have to do is add testcases for all requirements in the documentation.</p><p>You can split up the work within your group / even with other groups and then put
them all together.</p><p>There might be cases where the given implementation doesn&rsquo;t work as described in the
specification or the specification is ambiguous. Document these cases (e.g. in a
comment next to the test case) and make a sensible decision how to handle them.</p><p>Then use the code coverage tool to check wether your tests hit all the branches
in the updateQuality method. Add more test cases if needed.</p><h3 id=refactor>Refactor.</h3><p>A straightforward Solution for refactoring the GildedRose would be an Item
Hierarchy with each item &ldquo;knowing&rdquo; how to update it&rsquo;s quality.
Unfortunately, you can&rsquo;t do that because the Item class belongs to the Goblin.</p><p>Thus, you will need another Solution without the need to change the Item class. Are there any patterns that might help adding different behaviour without needing to change the Item class itself?
We will discuss possible solutions in the lab.</p><h3 id=add-the-new-functionality>Add the new functionality.</h3><p>If you adapted the design correctly in the refactoring, it should be easy to add
the newly required functionality. Don&rsquo;t forget to add test cases first - practice
Test Driven Development.</p><h1 id=submission>Submission</h1><p>Upload your source code together with a brief lab report (PDF) describing the
design of your refactored application with design patterns used.</p><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0,securityLevel:"loose"})</script></div></div></div></main><footer class="row p-0"><div class="col-md-2 c2">&nbsp;</div><div class="col-md-10 c4"><small><hr><div class=container-fluid><div class=row><div class=col-9><a href=https://bkleinen.github.io//contact>Prof. Dr. Barne Kleinen</a>,
<a href=https://www.htw-berlin.de>HTW Berlin</a>,
<a href=https://www.f4.htw-berlin.de/>FB4</a>, <a href=https://imi-bachelor.htw-berlin.de/>International Media and Computing</a>.
&nbsp;&nbsp;&dash;&nbsp;&nbsp;</div><div class=col-3><a href=https://bkleinen.github.io//contact/impressum>Impressum</a>,
<a href=https://bkleinen.github.io//contact/datenschutzerklaerung>Datenschutzerklärung</a></div></div><div class=row><div class=col-9>This work is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/>Creative Commons Attribution-NonCommercial 4.0 International License</a>.<br><small>This page was authored by: kleinen</small></div><div class=col-3><a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/><img alt="Creative Commons Licence" style=border-width:0 src=https://i.creativecommons.org/l/by-nc/4.0/88x31.png></a></div></div><div class=row><div class=col-sm-12></div></div></div></small></div></footer><script>let sortTables=!1,stripedTables=!0</script><script src=https://bkleinen.github.io/js/bundle.min.e133eae943f4d1cb473481e473689ee73e9f6880b33894730d0b3c8f682d034e.js defer></script></body></html>