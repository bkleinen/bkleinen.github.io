<!doctype html><html><head><title>Assignment 06 - Web Apps with Node and Express I - Prof. Dr. Barne Kleinen</title><link rel=icon href=https://bkleinen.github.io//favicon.ico>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=theme-color content="#1A94D2"><link rel=stylesheet href=https://bkleinen.github.io/css/styles.min.css media=screen></head><body><div class=container-fluid><header class="row m-b-5"><div class="col-md-2 c2">&nbsp;</div><div class="col-md-10 c1 p-2"><div class=container-flex><div class=row><div class=col-9><h1 class="c5 title">B15 Informatik 3 (Info3)</h1><small>Website of Prof. Dr. Barne Kleinen, Professor for Media Informatics
(<a href=https://imi-bachelor.htw-berlin.de>Bachelor</a>/<a href=https://imi-master.htw-berlin.de>Master</a>)
at <a href=https://www.htw-berlin.de>HTW Berlin</a></small></div><div class=col-3><a href=https://www.htw-berlin.de><img src=https://bkleinen.github.io//images/htw_logo_green.gif alt="HTW Berlin" title="HTW Berlin"></a><br><a href=https://bkleinen.github.io//>Programming and Web Technology @ IMI</a></div></div></div></div></header><main class="row p-0"><nav class="col-md-2 c2"><div class=nav><ul class="nav flex-md-column"><li class=nav-item></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/><div>Home</div></a></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/classes/ws2024/><div>Classes</div></a></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/material/><div>Material</div></a></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/software_projects/><div>Software Projects</div></a></li><li class=nav-item><a class="nav-link dropdown-toggle" data-bs-toggle=dropdown href=# role=button aria-expanded=false>Studies</a><div class=dropdown-menu><a class=dropdown-item href=https://bkleinen.github.io/studies/thesis/>Thesis</a>
<a class=dropdown-item href=https://bkleinen.github.io/studies/ic/>IC</a>
<a class=dropdown-item href=https://bkleinen.github.io/studies/bafoeg/>Bafoeg</a>
<a class=dropdown-item href=https://bkleinen.github.io/studies/grading/>Grading Info</a></div></li><li class=nav-item><a class="nav-link dropdown-toggle" data-bs-toggle=dropdown href=# role=button aria-expanded=false>Misc</a><div class=dropdown-menu><a class=dropdown-item href=https://bkleinen.github.io/misc/links/>Links to frequently used pages</a>
<a class=dropdown-item href=https://bkleinen.github.io/misc/trans/>Trans@HTW</a>
<a class=dropdown-item href=https://bkleinen.github.io/misc/lsf/>Email Collector for LSF</a></div></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/contact/><div>Contact Info</div></a></li><ul></div></nav><div class="col-md-10 c3"><div class=outer><nav aria-label=breadcrumb role=navigation><ol class="breadcrumb breadcrumb-thin"><li class=breadcrumb-item><a href=https://bkleinen.github.io/>Home</a></li><li class=breadcrumb-item><a href=https://bkleinen.github.io/classes/>classes</a></li><li class=breadcrumb-item><a href=https://bkleinen.github.io/classes/ws2020/>ws2020</a></li><li class=breadcrumb-item><a href=https://bkleinen.github.io/classes/ws2020/info3/>info3</a></li><li class=breadcrumb-item><a href=https://bkleinen.github.io/classes/ws2020/info3/labs/>labs</a></li><li class="breadcrumb-item active" aria-current=page>lab-06-express-1</li></ol></nav></div><div class=coursenav><ul class="nav nav-tabs"><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/classes/ws2020/info3/>Info3</a></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/classes/ws2020/info3/continuous_assessment/>Assessment</a></li><li class=nav-item><a class=nav-link href=https://bkleinen.github.io/classes/ws2020/info3/schedule/>Schedule</a></li><li class=nav-item><a class="nav-link active" href=https://bkleinen.github.io/classes/ws2020/info3/labs/>Labs</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" data-bs-toggle=dropdown href=# role=button aria-expanded=false>External Links</a><div class=dropdown-menu><a class=dropdown-item target=ex_link href="https://moodle.htw-berlin.de/course/view.php?id=28123">Moodle</a>
<a class=dropdown-item target=ex_link href="https://lsf.htw-berlin.de/qisserver/rds?state=wsearchv&amp;search=2&amp;veranstaltung.veranstid=161201">SU in LSF</a>
<a class=dropdown-item target=ex_link href="https://lsf.htw-berlin.de/qisserver/rds?state=wsearchv&amp;search=2&amp;veranstaltung.veranstid=164935">Labs in LSF</a>
<a class=dropdown-item target=ex_link href="https://lsf.htw-berlin.de/qisserver/rds?state=wplan&amp;act=stg&amp;pool=stg&amp;show=plan&amp;P.vx=kurz&amp;r_zuordabstgv.semvonint=3&amp;r_zuordabstgv.sembisint=3&amp;k_abstgv.abstgvnr=231">Semesterstundenplan im LSF</a>
<a class=dropdown-item target=ex_link href=https://gl-imi.f4.htw-berlin.de/info3-code-stubs-and-samples>Lecture Source Code</a></div></li></ul></div><div class=container-fluid><h2 class=followed>Assignment 06 - Web Apps with Node and Express I</h2><header class=following><a data-bs-toggle=collapse href=#tocContent role=button aria-expanded=false aria-controls=tocContent>Table of Contents
</a>&nbsp;&nbsp;&nbsp;&nbsp;
<a href=https://bkleinen.github.io/classes/ws2020/info3/labs/lab-06-rails-1/>&lt;prev</a>
<a href=https://bkleinen.github.io/classes/ws2020/info3/labs/lab-07-rails-2/>next></a></header><div class=collapse id=tocContent><nav id=TableOfContents><ul><li><a href=#lab-06---express-1>Lab 06 - Express 1</a></li><li><a href=#lab-07---express-2>Lab 07 - Express 2</a></li></ul><ul><li><a href=#assignment-1-design-a-very-small-example-app>Assignment 1: Design a <em>very small</em> example app</a></li><li><a href=#assignment-2-express-warm-up>Assignment 2: Express Warm Up</a><ul><li><a href=#step-1-create-your-pages-in-plain-html>Step 1: Create your pages in plain HTML.</a></li><li><a href=#step-2-set-up-a-first-node-and-express-app>Step 2: Set up a first node and express app:</a></li><li><a href=#step-3-add-your-html-pages-as-static-pages-to-your-express-app>Step 3: Add your HTML pages as static pages to your express app.</a></li></ul></li><li><a href=#assignment-3-your-app>Assignment 3: Your app</a><ul><li><a href=#step-1-create-a-new-app-with-express-generator>Step 1: Create a new app with express-generator</a></li><li><a href=#option-a-command-line>Option A: Command line</a></li><li><a href=#option-b-webstorm>Option B: WebStorm</a></li></ul></li><li><a href=#step-2-add-your-pages-as-ejs-templates-and-connect-them-with-a-route>Step 2: Add your pages as ejs Templates and connect them with a route</a></li><li><a href=#step-3-add-routes-for-your-views>Step 3: Add routes for your views</a></li><li><a href=#step-4-extract-the-data-and-put-it-in-the-controller-for-now>Step 4: Extract the data and put it in the controller for now.</a></li><li><a href=#step-5-optional-extract-common-html-stuff-into-a-layout>Step 5 (optional): Extract common HTML-Stuff into a Layout</a></li><li><a href=#results-submission>Results Submission</a></li></ul></nav></div><h1 id=overview>Overview</h1><p>In the course of this and the following Lab Assignment, you will implement a rudimentary web application
based on node and express.js.</p><p>The goal of the exercises is gain first experiences with fundamental steps
of web application development, rather than completing the app!</p><p>In the end, your app is expected to have the following features:</p><h2 id=lab-06---express-1>Lab 06 - Express 1</h2><ul><li>contain at least 1 view template displaying data that is hard-coded in the controller</li><li>process parameters sent from an HTML form in the controller</li><li>MVC: View and Controller should be clearly separated, e.g. in specific folders</li></ul><h2 id=lab-07---express-2>Lab 07 - Express 2</h2><ul><li>display at least 1 piece of data retrieved from the database</li><li>trigger at least 1 change in the database</li><li>implement and use at least 1 API endpoint</li><li>MVC structure is clearly visible</li></ul><p>The goal is not to complete the application but to practice these
basic elements of web application development.</p><h1 id=lab06>Lab06</h1><h2 id=assignment-1-design-a-very-small-example-app>Assignment 1: Design a <em>very small</em> example app</h2><p>Design a little app you want to implement.</p><p>At the core the app should store entities of a special type and accept creation of and/or modifications on them. If you want to play around <em>later</em>, you could add additional libraries for more features.</p><p>Here are some example ideas:</p><ul><li>Calculate if a given Internship is <a href=https://imi-bachelor.htw-berlin.de/studium/praktikum/#c10767>long enough</a> with a given start date and end date.</li><li>Collect Addresses for Corona-Walks. Addition with 3rd party libraries:
Show all members on a map. (Hint: use <a href=https://www.npmjs.com/package/node-geocoder>https://www.npmjs.com/package/node-geocoder</a> to geocode the adresses (try it at <a href=http://node-geocoder.herokuapp.com/>http://node-geocoder.herokuapp.com/</a>) and <a href=https://leafletjs.com>leaflet.js</a> to show them on a map)</li><li>An app to schedule appointments with you</li><li>Todo-App counting <a href=https://francescocirillo.com/pages/pomodoro-technique>Pomodori</a> (This will be the example used here)</li></ul><p>Sketch how the user interface should look like. About two pages with a link between them and a little bit of interactivity are sufficient. For a todo app this might be a list with all todos (called the index) and one page for a specific todo. A simple first bit of interaction would be create new todos by providing a line of text and marking todos as done.</p><p>For example:</p><p><img src=../images/sketch.png alt=Sketch title=sketch>
Simple Interface Sketches</p><h2 id=assignment-2-express-warm-up>Assignment 2: Express Warm Up</h2><h3 id=step-1-create-your-pages-in-plain-html>Step 1: Create your pages in plain HTML.</h3><p>Create the Pages you sketched using HTML only. They should have at least one form and they should be linked together correctly.</p><p><img src=../images/html1.png alt="HTML 1" title="html page 1"></p><p>Plain HTML Page 1</p><p><img src=../images/html2.png alt="HTML 2" title="html page 2"></p><p>Plain HTML Page 2</p><p>Note that these are very plain HTML pages! Don&rsquo;t spend
any time on visual appearance for now.</p><h3 id=step-2-set-up-a-first-node-and-express-app>Step 2: Set up a first node and express app:</h3><p>To do this, refer to the <a href=https://expressjs.com>express documentation</a> and Prof. Kleinen&rsquo;s <a href=https://github.com/htw-imi-info3-archive/express-app01 title="Beispiel App App01">App01</a>.</p><ol><li><p>Follow the express <a href=https://expressjs.com/en/starter/installing.html>getting started tutorial on the Express.js site</a></p></li><li><p>Look at the created files.</p></li><li><p>Initialize git repo, ignore node_modules:</p><pre tabindex=0><code class=language-code data-lang=code>git init
echo &#34;node_modules/**&#34; &gt; .gitignore
git add .
git commit -m &#34;initial commit&#34;
</code></pre></li><li><p>Edit index.js as described in the <a href=https://expressjs.com/en/starter/hello-world.html>hello world example on the Express.js site</a>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>port</span> <span class=o>=</span> <span class=mi>3001</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span><span class=s1>&#39;Hello World!&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=nx>port</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Example app listening at http://localhost:</span><span class=si>${</span><span class=nx>port</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div></li><li><p>Start the server with <code>node app.js</code>.</p></li></ol><h3 id=step-3-add-your-html-pages-as-static-pages-to-your-express-app>Step 3: Add your HTML pages as static pages to your express app.</h3><ul><li>See the <a href=https://expressjs.com/en/starter/static-files.html>Express.js site on serving static files</a>&mldr;</li><li>&mldr;and Prof. Kleinen&rsquo;s <a href=https://github.com/htw-imi-info3-archive/express-app01>first example app on github</a>. The <a href=https://github.com/htw-imi-info3-archive/express-app01/commits/master>commits in the example app</a> show the individual steps. Note that Prof. Kleinen sometimes uses <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then#Chaining>then-chaining</a> for working with promises. Please use async-await combos with regular try-catch blocks whenever it makes sense (See also <a href=https://javascriptwebscrapingguy.com/jordan-promises-async-await-vs-then/>async/await vs then</a>).</li></ul><h2 id=assignment-3-your-app>Assignment 3: Your app</h2><h3 id=step-1-create-a-new-app-with-express-generator>Step 1: Create a new app with express-generator</h3><p>The first app was a very simple express app to see the bare minimum once.
This <a href=https://github.com/htw-imi-info3-archive/express-app02>App02</a> has more structure and comes with a couple of packages installed,
especially logging and a basic error handling, but also a view template engine.</p><p>You can create the app using command line or using WebStorm, which calls the
express generator. Be sure to choose the same options:</p><ul><li>ejs as view template</li><li>add git files</li></ul><p>About css: Prof. Kleinen used <a href=https://sass-lang.com/>sass</a> in the example app, but you don&rsquo;t need it.</p><p>As always, create a repository in the appropriate place.</p><p>Look at the generated code. With which npm command can you start your app? On what port will you be able to see your app running, once started? Notice that the generator produces outdated ES code sometimes, eg. using &ldquo;var&rdquo; instead of &ldquo;const&rdquo; or &ldquo;let&rdquo;. You can fix this if you want to.</p><h3 id=option-a-command-line>Option A: Command line</h3><p>Run <code>npx express-generator --ejs --git </code>in the folder of your app,
or <code>npx express-generator --ejs --git --css sass</code> if you want to use sass.</p><h3 id=option-b-webstorm>Option B: WebStorm</h3><p>Create a new Project with WebStorm. Choose the Folder of your app as the location and all the other options as shown below.</p><p><img src=../images/newExpressProject.png alt=Express title="options for webstorm">
Using WebStorm to call express-generator</p><h2 id=step-2-add-your-pages-as-ejs-templates-and-connect-them-with-a-route>Step 2: Add your pages as ejs Templates and connect them with a route</h2><p>Now, add your HTML pages as ejs Templates. HTML-Templates (ejs is just one template type example) allow you to combine HTML with dynamically generated content.
Create a subfolder in views matching your model - eg. todo - and put the files there.</p><p>The example has one list of todos in views/todos/index.ejs, and a view for one single todo, which goes in views/todos/show.ejs.</p><p>For ejs, see the <a href=https://ejs.co/>Documentation</a></p><h2 id=step-3-add-routes-for-your-views>Step 3: Add routes for your views</h2><p>In the example the list (index) should be accessible via a get request (see also: <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods>HTTP Methods</a>) to /todos, and the show should be accessible via a get request to /todo/ e.g. /todo/4711.</p><p>See the <a href=https://github.com/htw-imi-info3-archive/express-app02/commits/master>second example app</a> for reference.</p><h2 id=step-4-extract-the-data-and-put-it-in-the-controller-for-now>Step 4: Extract the data and put it in the controller for now.</h2><p>As we don&rsquo;t have a database connected yet, just use hard-coded data in the controller to experiment with getting data to the view.
See the <a href=https://github.com/htw-imi-info3-archive/express-app02>App02</a> for reference, <a href=https://github.com/htw-imi-info3-archive/express-app02/commit/7600b7d12e2976127df8ddd5acd8b986b93823d6>especially this commit.</a></p><h2 id=step-5-optional-extract-common-html-stuff-into-a-layout>Step 5 (optional): Extract common HTML-Stuff into a Layout</h2><p>If you have more than one page, it may be annoying having to adjust the same stuff on both pages, as e.g. a common navigation or layout.</p><p>If you want, you can extract the common parts using ejs-layouts:</p><p>Install a new package <a href=https://www.npmjs.com/package/express-ejs-layouts>express-ejs-layouts</a> using either npm:</p><pre><code>    npm install express-ejs-layouts
</code></pre><p>Refactor your views to use a common layout. See the <a href=https://github.com/htw-imi-info3-archive/express-app02/commits/master>App02 commits</a> for reference.</p><h2 id=results-submission>Results Submission</h2><ul><li>Hand in a link to your repository for assignment 3. You don&rsquo;t need to submit your code for assignment 2.</li><li>Hand in a lab report (document all assignments) until January 14, 11pm.</li><li>Take part in the oral test on January 21.</li></ul><p>More info on the <a href=..>Labs</a> page.</p><h1 id=references>References</h1><ul><li><a href=https://github.com/htw-imi-info3-archive/express-app01 title="Beispiel App App01">App01</a></li><li><a href=https://github.com/htw-imi-info3-archive/express-app02>App02</a></li><li><a href=https://ejs.co/>ejs</a></li><li><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods>HTTP Methods</a></li></ul><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0,securityLevel:"loose"})</script></div></div></div></main><footer class="row p-0"><div class="col-md-2 c2">&nbsp;</div><div class="col-md-10 c4"><small><hr><div class=container-fluid><div class=row><div class=col-9><a href=https://bkleinen.github.io//contact>Prof. Dr. Barne Kleinen</a>,
<a href=https://www.htw-berlin.de>HTW Berlin</a>,
<a href=https://www.f4.htw-berlin.de/>FB4</a>, <a href=https://imi-bachelor.htw-berlin.de/>International Media and Computing</a>.
&nbsp;&nbsp;&dash;&nbsp;&nbsp;</div><div class=col-3><a href=https://bkleinen.github.io//contact/impressum>Impressum</a>,
<a href=https://bkleinen.github.io//contact/datenschutzerklaerung>Datenschutzerklärung</a></div></div><div class=row><div class=col-9>This work is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/>Creative Commons Attribution-NonCommercial 4.0 International License</a>.<br><small>This page was authored by: kleinen</small></div><div class=col-3><a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/><img alt="Creative Commons Licence" style=border-width:0 src=https://i.creativecommons.org/l/by-nc/4.0/88x31.png></a></div></div><div class=row><div class=col-sm-12></div></div></div></small></div></footer><script>let sortTables=!1,stripedTables=!0</script><script src=https://bkleinen.github.io/js/bundle.min.e133eae943f4d1cb473481e473689ee73e9f6880b33894730d0b3c8f682d034e.js defer></script></body></html>